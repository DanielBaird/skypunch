!function t(i,n,o){function e(s,r){if(!n[s]){if(!i[s]){var c="function"==typeof require&&require;if(!r&&c)return c(s,!0);if(h)return h(s,!0);throw new Error("Cannot find module '"+s+"'")}var a=n[s]={exports:{}};i[s][0].call(a.exports,function(t){var n=i[s][1][t];return e(n?n:t)},a,a.exports,t,i,n,o)}return n[s].exports}for(var h="function"==typeof require&&require,s=0;s<o.length;s++)e(o[s]);return e}({1:[function(t,i){var n={gethurtLeft:{moveOkay:!1,fallOkay:!0,"final":!1,steps:["moveLeft","hurtPic","moveLeft","moveLeft","pushbackPic","moveLeft","moveLeft","nothing","nothing","nothing","normalPic","nothing","nothing","nothing"]},gethurtRight:{moveOkay:!1,fallOkay:!0,"final":!1,steps:["moveRight","hurtPic","moveRight","moveRight","pushbackPic","moveRight","moveRight","nothing","nothing","nothing","normalPic","nothing","nothing","nothing"]},dead:{moveOkay:!1,fallOkay:!0,"final":!0,steps:["deadPic"]},winner:{moveOkay:!1,fallOkay:!1,"final":!0,steps:["winnerPic","moveUp","nothing","moveUp","nothing","moveDown","nothing","moveDown","nothing","nothing","nothing"]},jump:{moveOkay:!0,fallOkay:!1,"final":!1,steps:["moveUp","jumpPic","moveUp","moveUp","moveUp","moveUp","moveUp"]},land:{moveOkay:!1,fallOkay:!0,"final":!1,steps:["landingPic","nothing","nothing","nothing","normalPic"]},punch:{moveOkay:!1,fallOkay:!0,"final":!1,steps:["moveForward","punchPic","moveForward","smallHit","moveBack","normalPic","nothing","nothing","nothing"]},kick:{moveOkay:!1,fallOkay:!0,"final":!1,steps:["moveForward","moveForward","kickPic","moveForward","bigHit","moveBack","moveBack","normalPic","nothing","nothing","nothing"]}};i.exports=n},{}],2:[function(t){function i(){$(".loadingscreen").fadeOut(900,function(){}),player=o(5,80,15),player.setPlayerDom($(".robot.player0")),player.setHealthBarDom($(".health.player0")),r.push(player),opponent=e(5,320,20),opponent=h(10,320,20),opponent.setPlayerDom($(".robot.player1")),opponent.setHealthBarDom($(".health.player1")),r.push(opponent),$("body").on("keydown",function(t){var i=t.which;-1==s.indexOf(i)&&s.push(i)}),$("body").on("keyup",function(t){var i=s.indexOf(t.which);-1!=i&&s.splice(i,1)}),setInterval(n,50)}function n(){function t(t,i,n,e,h){o.push({player:t,dir:i,pos:n,height:e,damage:h})}var i,n={keys:s,positions:[]},o=[];for(playerId in r)i=r[playerId],n.positions.push(i.position);for(playerId in r)i=r[playerId],i.tick(n,{hit:function(n,o,e,h){t(i,n,o,e,h)}}),i.draw();var e=null;for(playerId in r){i=r[playerId];for(hitId in o)i!==o[hitId].player&&(e=o[hitId],i.getHit(e.direction,e.pos,e.height,e.damage));i.draw()}}var o=t("./players/robotPlayer"),e=t("./players/robotAI"),h=t("./players/robotPunchBag"),s=[],r=[];window.skypunch=i},{"./players/robotAI":4,"./players/robotPlayer":5,"./players/robotPunchBag":6}],3:[function(t,i){function n(t,i,n,o){this.type=t,this.health=i||5,this.robot="robot2",this.direction=1,this.pic="normal",this.currentAction=null,this.nextStep=0,this.position=n||80,this.height=o||15,this.health=i||5,this.dirty=["pic","position","height","health"],this.dom=null}actions=t("../actions/basicactions"),n.prototype={chooseNextAction:function(){console.log("Subclasses of Player should override chooseNextAction().")},smallHit:function(t,i){var n=20,o=this.direction,e=this.position+o*n,h=this.height;i.hit(o,e,h,1)},bigHit:function(t,i){var n=30,o=this.direction,e=this.position+o*n,h=this.height;i.hit(o,e,h,2)},getHit:function(t,i,n,o){var e=100,h=2,s=this.position,r=this.position+e,c=this.height,a=this.height+h;return i>=s&&r>=i&&n>=c&&a>=n?(this.currentAction="gethurt"+(1==t?"Right":"Left"),this.health-=o,this.dirty.push("health"),this.nextStep=0,this.health<=0&&(this.currentAction="dead"),!0):!1},constructor:n,sayType:function(){console.log(this.type)},setPlayerDom:function(t){this.dom=$(t)},setHealthBarDom:function(t){this.healthDom=$(t)},draw:function(){if(this.dom){{var t={};130-20*this.height,this.position}-1!=this.dirty.indexOf("health")&&this.healthDom.width(20*this.health),-1!=this.dirty.indexOf("pic")&&(t.backgroundImage=["url(robots",this.robot,1==this.direction?"right":"left",this.pic+".svg)"].join("/")),(-1!=this.dirty.indexOf("position")||-1!=this.dirty.indexOf("height"))&&(t.left=this.position,t.top=130-20*this.height),this.dirty=[],this.dom.css(t)}else alert("Can't draw "+this.type+" player without a DOM element. \nCall player.setDom(element) to assign an element.")},tick:function(t,i){if(this.currentAction){var n=actions[this.currentAction],o=n.steps[this.nextStep];o&&this[o]&&this[o].call(this,t,i),this.nextStep+=1,this.nextStep>=n.steps.length&&(this.currentAction=null,this.nextStep=0)}this.canFall()&&(this.moveDown(),this.height<1&&(this.height=0,this.isLocked()||(this.currentAction="land",this.nextStep=0))),this.currentAction||this.chooseNextAction(t,i)},switchPic:function(t){this.pic!=t&&(this.pic=t,this.dirty.push("pic"))},jumpPic:function(){this.switchPic("jump")},punchPic:function(){this.switchPic("punch")},kickPic:function(){this.switchPic("kick")},normalPic:function(){this.switchPic("normal")},landingPic:function(){this.switchPic("landing")},hurtPic:function(){this.switchPic("hurt")},pushbackPic:function(){this.switchPic("pushback")},deadPic:function(){this.switchPic("dead")},winnerPic:function(){this.switchPic("winner")},canFall:function(){return this.height>0&&(null===this.currentAction||actions[this.currentAction].fallOkay)},canMove:function(){return null===this.currentAction||actions[this.currentAction].moveOkay},isLocked:function(){return null!==this.currentAction&&actions[this.currentAction].isFinal},nothing:function(){},moveUp:function(){this.height++,this.dirty.push("height")},moveDown:function(){this.height--,this.dirty.push("height")},moveLeft:function(){this.position>10&&(this.position-=5,this.dirty.push("position"))},moveRight:function(){this.position<350&&(this.position+=5,this.dirty.push("position"))},faceLeft:function(){-1!=this.direction&&(this.direction=-1,this.dirty.push("pic"))},faceRight:function(){1!=this.direction&&(this.direction=1,this.dirty.push("pic"))},moveForward:function(){1==this.direction?this.moveRight():this.moveLeft()},moveBack:function(){1==this.direction?this.moveLeft():this.moveRight()}},i.exports=n},{"../actions/basicactions":1}],4:[function(t,i){BasicPlayer=t("./BasicPlayer"),aiPlayerMaker=function(t,i,n){var o=new BasicPlayer("AI",t,i,n);return o.chooseNextAction=function(t){var i=Math.random(),n=t.positions.filter(function(t){return t!=this.position},this),o=n[0]<this.position;.2>i&&(o?this.faceLeft(playerId):this.faceRight(playerId),this.canMove()&&this.moveForward(playerId)),i>.2&&.3>i&&(o?this.faceRight(playerId):this.faceLeft(playerId),this.canMove()&&this.moveForward(playerId)),!this.currentAction&&i>.3&&.4>i&&(this.currentAction="punch"),!this.currentAction&&i>.4&&.5>i&&(this.currentAction="kick"),!this.currentAction&&i>.6&&.7>i&&0==this.height&&(this.currentAction="jump")},o},i.exports=aiPlayerMaker},{"./BasicPlayer":3}],5:[function(t,i){function n(t,i){return-1!=i.indexOf(t)}BasicPlayer=t("./BasicPlayer"),robotPlayerMaker=function(t,i,o){var e=new BasicPlayer("robot",t,i,o);return e.chooseNextAction=function(t){this.currentAction||(n(69,t.keys)&&(this.currentAction="punch"),n(82,t.keys)&&(this.currentAction="kick"),n(32,t.keys)&&0==this.height&&(this.currentAction="jump")),(!this.currentAction||actions[this.currentAction].moveOkay)&&((n(65,t.keys)||n(37,t.keys))&&(this.faceLeft(playerId),this.moveLeft(playerId)),(n(68,t.keys)||n(39,t.keys))&&(this.faceRight(playerId),this.moveRight(playerId)))},e},i.exports=robotPlayerMaker},{"./BasicPlayer":3}],6:[function(t,i){BasicPlayer=t("./BasicPlayer"),playerMaker=function(t,i,n){var o=new BasicPlayer("PunchBag",t,i,n);return o.chooseNextAction=function(t){var i=Math.random(),n=t.positions.filter(function(t){return t!=this.position},this),o=n[0]<this.position;.01>i&&(o?this.faceLeft(playerId):this.faceRight(playerId))},o},i.exports=playerMaker},{"./BasicPlayer":3}]},{},[2]);